'''
Created on 8 oct. 2021

@author: Fab
'''
from LMT.autodoor.Gate import Gate
import time

if __name__ == '__main__':

    
    print( "Testing re-close / re-open.")

    gate = Gate( 
        COM_Servo = "COM80", 
        COM_Balance= "COM81", 
        COM_RFID = "COM82", 
        name="First Gate",
        weightFactor = 0.74 )
    
    gate.setSpeedAndTorqueLimits(200, 200)
    
        
    gate.open()
    time.sleep(1)
    gate.close()
    
    print("You can now try to force the opening of the door")
    print("It will re-close if it opens too much")
    print("You will see 'Door watch: re-closing door' in the log")
    
    time.sleep(60*60) # wait 1 hour
    gate.stop()
    
    
    